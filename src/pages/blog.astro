---
import BlogPost from '../components/BlogPost.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import { sortByDate } from '../utils';

const pageTitle = 'Blog Page';

const allPosts = await Astro.glob('../pages/posts/*.md');

const sortedPosts = allPosts.sort(sortByDate);
---

<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <link rel='icon' type='image/svg+xml' href='/favicon.svg' />
    <meta name='viewport' content='width=device-width' />
    <meta name='generator' content={Astro.generator} />
    <meta name='description' content='Blog page' />
  </head>
  <body>
    <BaseLayout pageTitle={pageTitle}>
      <ul>
        {
          sortedPosts.map((post) => (
            <BlogPost
              url={post.url}
              title={post.frontmatter.title}
              excerpt={post.frontmatter.excerpt}
              date={post.frontmatter.date}
            />
          ))
        }
      </ul>
    </BaseLayout>
  </body>
</html>
